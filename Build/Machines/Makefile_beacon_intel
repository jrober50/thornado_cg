## Makefile definitions for Beacon with Intel compiler
## VERY IMPORTANT: heap-arrays is needed for the large table of the app

C       = mpic++ --c++11
FORTRAN = /localdisk/quanshao/ExaStar/mpifort -fc=ifx -fPIC -fpp -xCore-AVX512  -heap-arrays 0 -O0
#-init=snan -traceback
FLINKER = /localdisk/quanshao/ExaStar/mpifort -fc=ifx -fPIC -fpp -xCore-AVX512  -heap-arrays 0 -O0 
#-init=snan -traceback
# -O0 -fpe0

DEBUG    = -warn all -ftrapuv
#-traceback 
#-debug offload 
OPTIMIZE = -warn all  
#-traceback 
#-debug offload

SUFFIX_f90 =

MDEFS =
PP    = -D

ifeq ($(USE_OMP),TRUE)
  OPENMP = -fiopenmp
else ifeq ($(USE_OMP_OL),TRUE)
  OPENMP = -fiopenmp -fopenmp-targets=spir64
#ATS AOT  
#  _gen -Xopenmp-target-backend "-device xehp -revision_id 4"
#PVC b AOT
# _gen -Xopenmp-target-backend "-device 0x0bd6 -revision_id 0x2f"
#PVC a AOT /JLSE PVC nodes
#  _gen -Xopenmp-target-backend "-device 0x0bd5 -revision_id 3"
endif

ifeq ($(USE_OACC),TRUE)
  OPENACC =
endif

INCLUDE_CUDA     =
INCLUDE_HDF5     = -I$(HDF5_INC)
INCLUDE_LAPACK   =
INCLUDE_MAGMA    =
INCLUDE_PETSC    =
INCLUDE_POSEIDON =
INCLUDE_ROCM     =
INCLUDE_ONEMKL   = -qmkl -fpp

LIBRARIES_CUDA     =
LIBRARIES_HDF5     = -L$(HDF5_LIB) -lhdf5_fortran -lhdf5
LIBRARIES_LAPACK   =
LIBRARIES_MAGMA    =
LIBRARIES_PETSC    =
LIBRARIES_POSEIDON =
LIBRARIES_ROCM     =
LIBRARIES_ONEMKL   = -qmkl -lmkl_sycl -lsycl
